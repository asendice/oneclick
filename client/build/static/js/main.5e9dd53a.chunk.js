(this.webpackJsonponeclick=this.webpackJsonponeclick||[]).push([[0],{42:function(e,t){},59:function(e,t,c){},82:function(e,t){},83:function(e,t){},92:function(e,t,c){"use strict";c.r(t);var n=c(2),s=c(46),a=c.n(s),r=(c(59),c(16)),i=c.n(r),l=c(23),o=c(6),d=c(25),j=c.n(d),h=j.a.create({baseURL:"http://localhost:8000/api"}),u=c(19),b=c(13),m=c.n(b),O=c(15),x=c(48),f=c(47),v=function(e){switch(e>0){case e>=1e3&&e<1e6:return"".concat(e/1e3,"KB");case e>=1e6&&e<1e9:return"".concat(e/1e6,"MB");default:return e}},p=c(1),N=function(e){var t,c,n=e.headers,s=e.errorRows,a=e.dataLength,r=e.file,i=n.filter((function(e){return 0===e.matchedWith.length}));return Object(p.jsx)("div",{className:"match-display",children:Object(p.jsxs)("div",{className:"display-container",children:[Object(p.jsxs)("div",{className:"display-item",children:[Object(p.jsx)(x.a,{className:"display-item-icon"}),n.length>0?Object(p.jsxs)("h4",{children:[a-s.length," / ",a," rows are being accepted"]}):Object(p.jsx)("h4",{children:"xxxx rows are being accepted"})]}),Object(p.jsxs)("div",{className:"display-item",children:[Object(p.jsx)(O.c,{className:"display-item-icon"}),n.length>0?Object(p.jsxs)("h4",{children:[s.length," rows are missing value(s)"]}):Object(p.jsx)("h4",{children:"xxx rows are missing value(s)"}),"text/csv"===r.type?Object(p.jsx)(f.CSVLink,{style:{textDecoration:"none"},data:s,className:"trove-button",filename:"".concat(r.name.slice(0,r.name.length-4),"_missing_values"),children:"Export Rows .CSV"}):Object(p.jsxs)("div",{className:"trove-button",style:{marginTop:"20px"},onClick:function(){return function(){var e=m.a.utils.json_to_sheet(s),t=m.a.utils.book_new();m.a.utils.book_append_sheet(t,e,"Sheet1"),m.a.writeFile(t,"".concat(r.name.slice(0,r.name.length-5),"_missing_values.xlsx"))}()},children:["Export Rows .XLSX"," "]})]}),Object(p.jsxs)("div",{className:"display-item",children:[Object(p.jsx)(O.a,{className:"display-item-icon"}),n.length>0?Object(p.jsxs)("h4",{children:[(t=i.length,c=n.length,(100-t/c*100).toString().slice(0,4))," % of your headers matched"]}):Object(p.jsx)("h4",{children:"xxx% of your headers matched"})]})]})})},g=c(14),w=function(e){var t=e.header,c=e.headers,s=e.setHeaders,a=e.confirmHeader,r=e.dropDownData,i=Object(n.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],h=Object(n.useRef)();return Object(n.useEffect)((function(){var e=function(e){d&&h.current&&!h.current.contains(e.target)&&j(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[d]),Object(p.jsxs)("div",{id:"csv-header",className:"csv-header",children:[Object(p.jsx)("div",{className:"left-side",children:Object(p.jsxs)("div",{className:"csv-table",children:[Object(p.jsxs)("div",{className:"table-header",children:[Object(p.jsx)("div",{className:"table-header-left",children:Object(p.jsx)("h4",{children:t.name})}),Object(p.jsx)("div",{className:"arrow-right"}),Object(p.jsxs)("div",{className:"table-header-right",children:[Object(p.jsxs)("div",{className:"table-header-right-content",children:[Object(p.jsx)("p",{children:t.matchedWith?t.matchedWith:"Search For Match"}),!t.confirmed&&Object(p.jsxs)("div",{className:"table-icons-container",children:[Object(p.jsx)("div",{onClick:function(){return function(){var e=Object(u.a)(c);t.matchedWith="",e.splice(c.indexOf(t),1,t),s(e)}()},className:"table-icons",children:Object(p.jsx)(O.d,{})}),"|",Object(p.jsx)("div",{className:"table-icons",onClick:function(){j(!d)},children:Object(p.jsx)(O.b,{})})]})]}),!t.confirmed&&Object(p.jsx)("div",{id:"drop-down",ref:h,className:"drop-down",style:{display:"".concat(d?"block":"none")},children:r.map((function(e,n){return Object(p.jsx)("div",{onClick:function(){!function(e){var n=Object(u.a)(c);t.matchedWith=e,n.splice(c.indexOf(t),1,t),s(n)}(e.name),j(!d)},className:"drop-down-item",children:e.name},n)}))})]})]}),t.values.slice(1,4).map((function(e,t){return Object(p.jsxs)("div",{className:"cell",children:[Object(p.jsx)("div",{className:"cell-index",children:t+1}),Object(p.jsx)("p",{children:e})]},t)}))]})}),Object(p.jsx)("div",{className:"right-side",children:Object(p.jsxs)("div",{className:"csv-results",children:[t.matchedWith.length>0?Object(p.jsxs)("div",{className:"results",children:[Object(p.jsx)(g.a,{className:"small-check-icon"}),Object(p.jsxs)("h1",{children:["Matched to the ",Object(p.jsxs)("p",{children:[" ",t.matchedWith," "]})," field"]})]}):Object(p.jsxs)("div",{className:"results error-text",children:[Object(p.jsx)(O.c,{style:{fontSize:"1.4rem"}}),Object(p.jsx)("h1",{children:"Unable to automatically match"})]}),t.confirmed?Object(p.jsxs)("div",{className:"results",children:[Object(p.jsx)(g.a,{className:"small-check-icon"}),Object(p.jsx)("h1",{children:"Header Confirmed"})]}):!t.confirmed&&t.matchedWith.length>0?Object(p.jsx)("div",{className:"results-button-container",children:Object(p.jsx)("div",{className:"confirm button",onClick:function(){a(t,c.indexOf(t))},children:"Confirm Matching"})}):Object(p.jsx)("div",{children:" "})]})})]})},y=function(){return[0,1,2,3,4].map((function(e,t){return Object(p.jsx)("div",{className:"loading-header"},t)}))},k=c(12),S=c(4),C=function(e){var t=e.file,c=e.data,s=e.backEndHeaders,a=e.setData,r=e.setFrame,i=Object(n.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],h=Object(n.useState)([]),b=Object(o.a)(h,2),m=b[0],O=b[1],x=Object(n.useState)([]),f=Object(o.a)(x,2),v=f[0],g=f[1],C=Object(n.useState)([]),E=Object(o.a)(C,2),D=E[0],F=E[1];Object(n.useEffect)((function(){if(m.length>0){0===m.filter((function(e){return!1===e.confirmed})).length&&j(!0);var e=m.map((function(e){return e.matchedWith}));F(s.filter((function(t){return!e.includes(t.name)})))}}),[m]),Object(n.useEffect)((function(){var e=c.filter((function(e){return Object.keys(e).some((function(t){return""===e[t]}))}));g(e)}),[c]),Object(n.useEffect)((function(){if(c.length>0){var e=Object.keys(c[0]).map((function(e,t){var n=c.map((function(t){return t[e]}));return{index:t,name:e,matchedWith:"",confirmed:!1,values:n}}));R(e)}}),[c]);var R=function(e){var t=e.map((function(e){var t=s.filter((function(t){return e.name===t.name||t.altNames.includes(e.name)}));return e.matchedWith=t[0]?t[0].name:"",e}));O(t)},W=function(e,t){e.name=e.matchedWith,e.confirmed=!0;var c=Object(u.a)(m);c.splice(t,1,e),O(c)};return t?Object(p.jsxs)("div",{className:"match",children:[Object(p.jsxs)("div",{className:"match-header",children:[Object(p.jsx)("h3",{children:t.name}),Object(p.jsx)("div",{children:d&&Object(p.jsx)(k.b,{to:"/review",style:{textDecoration:"none"},className:"trove-button",onClick:function(){return function(){var e=c.filter((function(e){return!v.includes(e)})),t=m.map((function(e){return e.name})),n=e.map((function(e,c){return Object.keys(e).map((function(c,n){t[n]!==c&&(e[t[n]]=e[c],delete e[c])})),e}));a(n),r("Review")}()},children:"Review"})})]}),Object(p.jsx)(N,{headers:m,errorRows:v,dataLength:c.length,file:t}),Object(p.jsx)("div",{className:"match-main",children:m.length>0?m.map((function(e,t){return Object(p.jsx)(w,{header:e,headers:m,setHeaders:O,confirmHeader:W,dropDownData:D},t)})):Object(p.jsx)(y,{})})]}):Object(p.jsx)(S.a,{to:"/"})},E=c(20),D=c(53),F=c(31),R=function(e){var t=e.submit,c=e.file,n=e.rejected;return Object(p.jsxs)("div",{className:"fileItem",children:[n?Object(p.jsx)(F.b,{className:"fileIcon rejected"}):Object(p.jsx)(F.a,{className:"fileIcon"}),Object(p.jsxs)("div",{className:"fileContent",children:[Object(p.jsx)("h3",{children:c.name}),Object(p.jsx)("p",{children:v(c.size)})]}),n?Object(p.jsx)("div",{className:"fileRejected rejected",children:"File Rejected, Only *.csv, *.xlsx, *.xls files are accepted"}):Object(p.jsx)(k.b,{style:{textDecoration:"none"},to:"/match",className:"fileButton",onClick:function(){return t()},children:"Next"})]})},W=function(e){var t=e.setFile,c=e.handleCSV,n=e.setFrame,s=e.setData,a=Object(D.a)({accept:".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=a.acceptedFiles,i=a.fileRejections,l=a.getRootProps,o=a.getInputProps,d=a.isDragActive;return Object(p.jsx)("div",{className:"upload",children:Object(p.jsxs)("div",{className:"upload-content",children:[Object(p.jsx)("div",{className:"upload-header",children:Object(p.jsx)("h3",{children:"Upload file for onboard"})}),Object(p.jsxs)("div",Object(E.a)(Object(E.a)({},l(d)),{},{className:"dropzone ".concat(d&&"active-dropzone"," "),children:[Object(p.jsx)("input",Object(E.a)(Object(E.a)({},o()),{},{accept:".csv, .xlsx, .xls"})),Object(p.jsxs)("div",{className:"dropzone-content ".concat(d&&"active-dropzone-content"," "),children:[Object(p.jsx)(g.c,{className:"upload-icon"}),Object(p.jsx)("p",{children:"Drag and drop to upload"}),Object(p.jsx)("p",{children:"Or"}),Object(p.jsx)("div",{className:"trove-button",children:"Browse Files"}),Object(p.jsx)("p",{className:"info-text",children:"(Only *.csv, *.xlsx, *.xls files will be accepted)"})]})]})),r[0]&&Object(p.jsx)(R,{submit:function(){var e=r[0],a=new FileReader;"text/csv"===e.type?(a.onload=function(e){var t=e.target.result;c(t)},a.readAsText(e)):(a.onload=function(e){var t=e.target.result,c=m.a.read(t,{type:"binary"}),n=c.SheetNames[0],a=c.Sheets[n],r=m.a.utils.sheet_to_json(a,{raw:!1,defval:""});s(r)},a.readAsBinaryString(e)),t(e),n("Match")},file:r[0]}),i[0]&&Object(p.jsx)(R,{file:i[0].file,rejected:!0})]})})},_=c(26),z=function(e){var t=e.frame,c=["Upload","Match","Review","Complete"];return Object(p.jsx)("div",{className:"progress",children:c.map((function(e,n){return Object(p.jsxs)("div",{className:"progress-item",children:[n<c.indexOf(t)?Object(p.jsx)(g.b,{className:"check-icon"}):Object(p.jsx)(_.b,{className:"progress-arrow",style:{color:t===e?"#333":"grey"}}),Object(p.jsx)("h3",{style:{color:n<c.indexOf(t)?"rgb(19, 125, 88)":e===t?"#333":"grey"},children:e})]},n)}))})},H=c(54),L=c(52),M=function(e){var t=e.file,c=e.data,s=e.setFrame,a=Object(n.useState)([]),r=Object(o.a)(a,2),i=r[0],l=r[1],d=Object(n.useState)([]),j=Object(o.a)(d,2),h=j[0],u=j[1];Object(n.useEffect)((function(){if(c.length>0){var e=Object.keys(c[0]),t=c.map((function(t){return e.map((function(e){return t[e]}))}));l(e),u(t)}}),[c]);var b=function(e){var t=e.index,c=e.style;return Object(p.jsx)("div",{style:c,className:"review-table-row",children:h[t].map((function(e,t){return Object(p.jsx)("div",{className:"review-table-cell",children:Object(p.jsx)("p",{children:e.length>8?e.slice(0,7)+"...":e})},t)}))},t)};return c.length>0?Object(p.jsxs)("div",{className:"review",children:[Object(p.jsxs)("div",{className:"review-header",children:[Object(p.jsx)("h3",{children:t.name}),Object(p.jsx)("div",{children:Object(p.jsx)(k.b,{className:"trove-button",style:{textDecoration:"none"},onClick:function(){return s("Complete")},to:"/complete",children:"Complete"})})]}),Object(p.jsxs)("div",{className:"review-table",children:[Object(p.jsx)("div",{className:"review-table-headers",children:i.map((function(e,t){return Object(p.jsxs)("div",{className:"review-table-header",children:[Object(p.jsx)("p",{children:e})," "]},t)}))}),h.length>0&&Object(p.jsx)(L.a,{children:function(e){var t=e.height,c=e.width;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(H.a,{height:t-40,width:c,itemData:h,itemCount:h.length,itemSize:41,className:"no-scrollbars",children:b})})}})]})]}):Object(p.jsx)(S.a,{to:"/"})},B=function(e){var t=e.data,c=e.file,s=Object(n.useState)(),a=Object(o.a)(s,2),r=a[0],d=a[1],h=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("http://localhost:3000/userdata",t).then((function(e){if(e)return e;console.error("Error, yo shit not be posted")})).then((function(e){d(e.status)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t.length>0?Object(p.jsxs)("div",{className:"complete",children:[Object(p.jsx)("div",{className:"complete-header",children:Object(p.jsx)("h3",{children:c.name})}),Object(p.jsx)("div",{className:"complete-main",children:r?Object(p.jsx)("div",{className:"",children:" Onboard successful!"}):Object(p.jsx)("div",{className:"complete-post-button",onClick:function(){return h()},children:"Complete Onboarding"})})]}):Object(p.jsx)(S.a,{to:"/"})},U=function(){return Object(p.jsx)("div",{className:"footer",children:"  "})},I=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)([]),r=Object(o.a)(a,2),d=r[0],j=r[1],u=Object(n.useState)("Upload"),b=Object(o.a)(u,2),m=b[0],O=b[1],x=Object(n.useState)([]),f=Object(o.a)(x,2),v=f[0],N=f[1],g=function(e){var t=e.slice(0,e.indexOf("\n")).split(",").map((function(e){return e.replace("\r","").replace(/"/g,"")})),c=e.slice(e.indexOf("\n")+1).split("\n").filter((function(e){return e.length>0})).map((function(e){var c=e.split(",");if(c.length>0)return t.reduce((function(e,t,n){return e[t]=c[n]&&c[n].replace("\r","").replace(/"/g,""),e}),{})}));j(c)},w=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/headers").then((function(e){if(e)return console.log(e),e;var t=new Error("Error ".concat(t.status,": ").concat(t.statusText));throw t.response=e,t})).then((function(e){return N(e.data.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){w()}),[]),Object(p.jsxs)("div",{className:"app",children:[Object(p.jsxs)(k.a,{children:[Object(p.jsxs)("div",{className:"header",children:["Match"===m?Object(p.jsx)(k.b,{to:"/",className:"back-arrow",onClick:function(){return O("Upload")},children:Object(p.jsx)(_.a,{})}):Object(p.jsx)("div",{}),Object(p.jsx)(z,{frame:m})]}),Object(p.jsx)(S.b,{exact:!0,path:"/",render:function(){return Object(p.jsx)(W,{setFile:s,handleCSV:g,setFrame:O,setData:j})}}),Object(p.jsx)(S.b,{exact:!0,path:"/match",render:function(){return Object(p.jsx)(C,{file:c,data:d,setData:j,backEndHeaders:v,setFrame:O})}}),Object(p.jsx)(S.b,{exact:!0,path:"/review",render:function(){return Object(p.jsx)(M,{file:c,data:d,setFrame:O})}}),Object(p.jsx)(S.b,{exact:!0,path:"/complete",render:function(){return Object(p.jsx)(B,{file:c,data:d})}})]}),Object(p.jsx)(U,{})]})};a.a.render(Object(p.jsx)(I,{}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.5e9dd53a.chunk.js.map